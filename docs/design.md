
è¿™æ˜¯å¹¿å‘Šå…¬å¸ï¼ˆTikTok Ads / Pangle / Meta Ads Creative / Google Ads Creative Studioï¼‰çœ‹åˆ°ä¼šéå¸¸è®¤å¯çš„æ ¼å¼ã€‚

---

# ğŸŒˆ **AI å¤šå°ºå¯¸å¹¿å‘Šåˆ›æ„ç”Ÿæˆå¹³å°ï¼ˆAI Image Creative Generatorï¼‰**

> ä¸€ä¸ªç«¯åˆ°ç«¯å¹¿å‘Šåˆ›æ„è‡ªåŠ¨åŒ–å¹³å°ï¼šè¾“å…¥å•†å“ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆ 1:1ã€9:16ã€4:5ã€1200x628ã€Banner ç­‰å¤šå°ºå¯¸å¹¿å‘Šå›¾ï¼Œå¹¶æ ¹æ® CTR é¢„æµ‹æ’åºï¼Œæ”¯æŒè‡ªåŠ¨åŒ–æŠ•æ”¾ä¸ A/B æµ‹è¯•ã€‚

---

# 1. é¡¹ç›®èƒŒæ™¯ï¼ˆBusiness Problemï¼‰

åœ¨æµ·å¤–å¹¿å‘ŠæŠ•æ”¾ï¼ˆFacebook / TikTok / Google Displayï¼‰ä¸­ï¼Œå¹¿å‘Šä¸»å¿…é¡»å‡†å¤‡ï¼š

* å¤šç§å°ºå¯¸çš„å¹¿å‘Šå›¾ç‰‡
* ä¸åŒé£æ ¼çš„åˆ›æ„
* ä¸åŒå—ä¼—çš„ç‰ˆæœ¬
* ä¸Šç™¾æ¡å¹¿å‘Šæ–‡æ¡ˆä¸ç´ æ

ä¼ ç»Ÿæ–¹å¼å­˜åœ¨ç—›ç‚¹ï¼š

* è®¾è®¡æˆæœ¬é«˜
* äº§èƒ½æœ‰é™
* æ‰‹å·¥è£å‰ªä¸é€‚é…éå¸¸è€—æ—¶
* åˆ›æ„è´¨é‡ä¸ç¨³å®š
* ä¸åŒå°ºå¯¸é£æ ¼éš¾ä¿æŒä¸€è‡´
* å¹¿å‘Šåˆ›æ„ A/B æµ‹è¯•æ•ˆç‡ä½

å› æ­¤éœ€è¦ä¸€ä¸ªè‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œå¯ä»¥ï¼š

* ç”Ÿæˆè§†è§‰ä¸€è‡´çš„å¤šå°ºå¯¸åˆ›æ„
* è‡ªåŠ¨æ’ç‰ˆå•†å“ä¿¡æ¯
* è‡ªåŠ¨é¢„ä¼° CTR
* è‡ªåŠ¨æ±‡æ€»è¡¨ç°è¿›è¡Œè¿­ä»£

è¿™å¥—ç³»ç»Ÿå³å¯¹åº”ï¼š

**Meta Advantage+ Creative**
**TikTok Smart Creative**
**Google Performance Max Creative Studio**

---

# 2. é¡¹ç›®ç›®æ ‡ï¼ˆObjectivesï¼‰

## ğŸ¯ åŠŸèƒ½ç›®æ ‡

* è¾“å…¥å•†å“æ ‡é¢˜/å–ç‚¹ + å•†å“å›¾ â†’ è‡ªåŠ¨ç”Ÿæˆå¤šé£æ ¼ã€å¤šå°ºå¯¸å¹¿å‘Šå›¾
* è‡ªåŠ¨ç”Ÿæˆ CTAã€ä»·æ ¼æ ‡ç­¾ã€èƒŒæ™¯å¸ƒæ™¯ç­‰å…ƒç´ 
* å»ºç«‹ CTR é¢„æµ‹æ¨¡å‹ï¼Œå¯¹ç”Ÿæˆç´ æè¿›è¡Œè¯„åˆ†ä¸æ’åº
* äº§å‡º top-K æœ€ä¼˜å¹¿å‘Šå›¾
* æ”¯æŒç´ æç®¡ç†ã€ç‰ˆæœ¬ç®¡ç†ã€A/B æµ‹è¯•ç®¡ç†
* æä¾› RESTful APIï¼Œæ”¯æŒè‡ªåŠ¨æ¥å…¥å¹¿å‘ŠæŠ•æ”¾ç³»ç»Ÿ
* æ”¯æŒ clickhouse + grafana çš„å¹¿å‘Šè¡¨ç°ç›‘æ§

## ğŸ¯ æŠ€æœ¯ç›®æ ‡

* æ„å»ºä¸€ä¸ªé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„åˆ›æ„ç”Ÿæˆä¸æ’ç‰ˆæœåŠ¡ï¼ˆGoï¼‰
* å¯¹æ¥å¤§å‹æ¨¡å‹ï¼ˆLLM + Diffusion/Fluxï¼‰
* Pipeline åŒ–å¤šæ¨¡æ€ç”Ÿæˆä¸è¯„ä¼°
* å®ç°å¯è§‚æµ‹æ€§ä¸æ€§èƒ½ä¼˜åŒ–

---

# 3. ç³»ç»Ÿæ¶æ„ï¼ˆSystem Architectureï¼‰

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   User / Advertiser   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Creative API (Go)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                        â”‚                  â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  LLM æœåŠ¡ â”‚           â”‚ Image Gen  â”‚      â”‚ Layout Engineâ”‚
â”‚(briefç”Ÿæˆ)â”‚           â”‚(SDXL/Flux) â”‚      â”‚(æ–‡æœ¬/è´´å›¾)   â”‚
â””â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
     â”‚                        â”‚                  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚Quality Eval â”‚          â”‚ CTR Prediction   â”‚
              â”‚(CLIPScore)  â”‚          â”‚ Model (MLP/RF)   â”‚
              â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
              â”‚        Creative Ranking             â”‚
              â””â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚  Asset Manager   â”‚ (S3 / OSS / MinIO)
             â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Metrics Pipeline    â”‚ (Kafka â†’ ClickHouse)
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚  Grafana Monitor â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 4. æ¨¡å—è®¾è®¡ï¼ˆModule Breakdownï¼‰

## 4.1 Creative API Layerï¼ˆGoï¼‰

èŒè´£ï¼š

* ç»Ÿä¸€æ¥å…¥å±‚
* å‚æ•°æ ¡éªŒï¼ˆå•†å“æ ‡é¢˜ã€å–ç‚¹ã€å•†å“å›¾ï¼‰
* è´Ÿè½½å‡è¡¡ / é™æµ
* pipeline orchestration
* è¿”å› top-K creatives

## 4.2 Creative Brief Generationï¼ˆLLMï¼‰

LLM è´Ÿè´£ç”Ÿæˆï¼š

* ä¸»é¢˜å»ºè®®ï¼ˆèŠ‚æ—¥ç‰ˆ / ä¼˜é›…ç‰ˆ / æç®€ç‰ˆ / æ´»åŠ›ç‰ˆï¼‰
* æ–‡æ¡ˆï¼ˆæ ‡é¢˜ / å‰¯æ ‡é¢˜ / CTAï¼‰
* èƒŒæ™¯é£æ ¼
* é¢œè‰²å»ºè®®

ç¤ºä¾‹ Promptï¼š

```
Given product details, output creative briefs including:
- visual theme
- background description
- composition hints
- target audience variation
```

## 4.3 Image Generationï¼ˆDiffusion æ¨¡å‹ï¼‰

é€‰å‹ï¼š

* SDXL (é«˜è´¨é‡)
* Stable Diffusion Turboï¼ˆåŠ é€Ÿï¼‰
* Fluxï¼ˆæ–°ä¸€ä»£é«˜è´¨é‡ diffusersï¼‰

æµç¨‹ï¼š

* ç”ŸæˆåŸºç¡€å›¾ï¼ˆsquareï¼‰
* å†ç”¨ ControlNet / IP-Adapter æ³¨å…¥å•†å“å›¾
* æœ€åç”Ÿæˆ 4~8 ä¸ªä¸åŒé£æ ¼çš„åˆç¨¿

## 4.4 Multi-Format Layout Engineï¼ˆæ ¸å¿ƒäº®ç‚¹ï¼‰

è‡ªåŠ¨ç”Ÿæˆå¤šå°ºå¯¸å¹¿å‘Šå›¾ï¼ˆ1:1, 4:5, 9:16, bannerï¼‰ã€‚

åŠŸèƒ½ï¼š

* è‡ªåŠ¨è£å‰ª
* è‡ªåŠ¨è¯†åˆ«å•†å“ä¸»ä½“ï¼ˆSAM æ¨¡å‹ï¼‰
* è‡ªé€‚åº” text box layout
* CTA æŒ‰é’®ç”Ÿæˆ
* logo è‡ªåŠ¨æ”¾ç½®
* å›¾å±‚åˆæˆ

å¼•æ“ç»“æ„ï¼š

```
LayoutEngine
 â”œâ”€â”€ DetectForeground()
 â”œâ”€â”€ ResizeCanvas()
 â”œâ”€â”€ AutoCrop()
 â”œâ”€â”€ AddTextBlock()
 â”œâ”€â”€ AddPriceTag()
 â”œâ”€â”€ Render()
```

## 4.5 Quality Scoringï¼ˆCLIPScoreï¼‰

ç”¨äºç­›æ‰ï¼š

* æ¨¡ç³Šå›¾
* é¢œè‰²è¿‡æš—
* ä¸ç›¸å…³å†…å®¹
* è¿ç¦ç‰©ä½“ï¼ˆå¯å¢åŠ å®‰å…¨æ¨¡å‹ï¼‰

## 4.6 CTR Prediction Modelï¼ˆRankingï¼‰

ä¸€ä¸ªè½»é‡çº§æ¨¡å‹ç”¨äºé€‰æ‹©æœ€ä¼˜åˆ›æ„ï¼š

* è¾“å…¥ï¼šEmbeddingï¼ˆCLIP / BLIPï¼‰
* è®­ç»ƒä¸€ä¸ªå° MLP / RandomForest
* é¢„æµ‹ CTR

è¾“å‡ºï¼š**sorted creatives**

## 4.7 Asset Managerï¼ˆç´ æç®¡ç†ï¼‰

å­˜å‚¨ï¼š

* åŸå§‹å›¾
* å„å°ºå¯¸å¹¿å‘Šå›¾
* å…ƒæ•°æ®
* CTR å†å²

ç”¨ MinIO / OSS / S3 å®ç°ã€‚

## 4.8 Metrics Pipelineï¼ˆKafka â†’ ClickHouseï¼‰

è®°å½•ï¼š

* å„å¹¿å‘Šç´ æçš„ CTR / CVR
* A/B å®éªŒæ•°æ®
* ç”¨æˆ·äº¤äº’
* ç”Ÿæˆæ¨¡å‹è€—æ—¶

æœ€ç»ˆ Grafana å¯è§†åŒ–ã€‚

---

# 5. æ•°æ®æµï¼ˆData Flowï¼‰

```
User â†’ Creative API â†’ LLM Brief
                      â†“
               Image Generation (SDXL)
                      â†“
                Multi-Size Rendering
                      â†“
            Quality & CTR Score Ranking
                      â†“
                Asset Manager
                      â†“
      Kafka â†’ ClickHouse â†’ Grafana Dashboard
```

---

# 6. æŠ€æœ¯é€‰å‹ï¼ˆTech Stackï¼‰

### **Backendï¼ˆæ ¸å¿ƒï¼‰**

* Goï¼ˆé«˜å¹¶å‘ã€å·¥ç¨‹åŒ–ã€å¹¿å‘Šè¡Œä¸šæ ‡é…ï¼‰
* Gin / Echoï¼ˆWebï¼‰
* gRPCï¼ˆæ¨¡å‹æ¨ç†é€šä¿¡ï¼‰

### **AI æ¨¡å‹**

* LLMï¼šQwen2.5 / Llama3 / GPT-4o-mini
* Image Genï¼šSDXL / Flux
* IP-Adapterï¼ˆå•†å“å¯æ§æ³¨å…¥ï¼‰
* CLIPï¼ˆå›¾æ–‡ embeddingï¼‰

### **Infra**

* Kafkaï¼ˆæ—¥å¿—ï¼‰
* ClickHouseï¼ˆæŒ‡æ ‡ï¼‰
* Redisï¼ˆç¼“å­˜ï¼‰
* MinIOï¼ˆç´ æï¼‰
* Grafanaï¼ˆç›‘æ§ï¼‰

---

# 7. API è®¾è®¡ï¼ˆç®€ç‰ˆï¼‰

### POST `/creative/generate`

è¯·æ±‚ï¼š

```json
{
  "title": "Camping Tent",
  "selling_points": ["waterproof", "3-season", "lightweight"],
  "image_url": "https://cdn.xxx/tent.png",
  "formats": ["1:1", "4:5", "9:16", "1200x628"],
  "num_variants": 6
}
```

å“åº”ï¼š

```json
{
  "task_id": "abc123",
  "creatives": [
    {
      "format": "1:1",
      "image_url": "...",
      "ctr_score": 0.74,
      "layout_meta": {...}
    }
  ]
}
```

---

# 8. Performance & Scalability

* å¹¶å‘ç”Ÿæˆ pipeline
* ä»»åŠ¡é˜Ÿåˆ—ï¼ˆRabbitMQ / Kafkaï¼‰
* æ¨¡å‹æ¨ç†æœåŠ¡æ± ï¼ˆAutoscalingï¼‰
* Go routine å¹¶å‘ä¼˜åŒ–

---

# 9. å¯ä»¥å†™è¿›ç®€å†çš„äº®ç‚¹ï¼ˆç®€å†ç‰ˆ Summaryï¼‰

```
â€¢ Designed and built an end-to-end Multi-Format Ad Creative Generation Platform using Go,
  enabling automatic generation of ad images across 10+ aspect ratios (1:1, 4:5, 9:16, 1200x628, etc.).
â€¢ Integrated LLM-based creative brief generation, SDXL/Flux image synthesis, and an automated
  layout engine for text/logo placement with adaptive cropping and foreground detection.
â€¢ Implemented CLIP-based quality scoring and a lightweight CTR prediction model to rank creative variants.
â€¢ Built a complete data pipeline (Kafka â†’ ClickHouse â†’ Grafana) for real-time creative performance tracking,
  supporting automated A/B experimentation and creative optimization.
â€¢ Achieved production-grade performance through a scalable Go backend with model-serving microservices.
```
